PRETTY_NAME="Ubuntu 24.04.1 LTS"

------------------------------------------------------------
Task 1 – Process Monitoring
------------------------------------------------------------

$ ps
  PID TTY          TIME CMD
 1124 pts/0    00:00:00 bash
 1158 pts/0    00:00:00 ps


$ ps aux
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  0.0  0.4 168256  8956 ?        Ss   08:52   0:02 /sbin/init
root       503  0.0  0.3  47544  7100 ?        Ss   08:52   0:00 /lib/systemd/systemd-journald
root       712  0.0  0.2  28472  5248 ?        Ss   08:52   0:00 /usr/sbin/cron
root       821  0.0  0.5 122400 10456 ?        Ssl  08:52   0:01 /usr/bin/amazon-ssm-agent
toor      1124  0.0  0.1  14872  3600 pts/0    Ss   10:14   0:00 -bash
toor      1160  0.0  0.1  16240  3120 pts/0    R+   10:15   0:00 ps aux


$ ps auxf
root         1  0.0  0.4 168256  8956 ?        Ss   08:52   0:02 /sbin/init
root       712  0.0  0.2  28472  5248 ?        Ss   08:52   0:00  \_ cron
toor      1124  0.0  0.1  14872  3600 pts/0    Ss   10:14   0:00  \_ -bash
toor      1182  0.0  0.1  16240  3120 pts/0    R+   10:16   0:00      \_ ps auxf


$ ps -u $(whoami)
  PID TTY          TIME CMD
 1124 pts/0    00:00:00 bash
 1186 pts/0    00:00:00 ps


$ ps -eo pid,ppid,cmd,%mem,%cpu --sort=-%cpu | head
  PID  PPID CMD                         %MEM %CPU
 1190  1124 ps -eo pid,ppid,cmd,%mem,%c  0.1  1.5
    1     0 /sbin/init                  0.4  0.0
  712     1 /usr/sbin/cron              0.2  0.0


$ ps aux | grep bash
toor      1124  0.0  0.1  14872  3600 pts/0 Ss   10:14 0:00 -bash
toor      1195  0.0  0.1  16240  3120 pts/0 S+   10:16 0:00 grep --color=auto bash


$ top
top - 10:18:12 up 1:26,  1 user,  load average: 0.02, 0.01, 0.05
Tasks: 105 total,   1 running, 104 sleeping
%Cpu(s):  0.7 us,  0.3 sy,  0.0 ni, 99.0 id
MiB Mem :  1974.0 total,  1240.4 free,  310.3 used,  423.3 buff/cache


$ sudo apt update && sudo apt install htop -y
htop is already the newest version (3.3.0-1ubuntu1).


------------------------------------------------------------
Task 2 – Process Management
------------------------------------------------------------

$ ps -o pid,ni,cmd -p $$
  PID  NI CMD
 1124   0 -bash


$ ./cpu_intensive.sh &
[1] 1245
Starting CPU intensive process...


$ jobs -l
[1]+  1245 Running                 ./cpu_intensive.sh &


$ ps -o pid,ni,cmd | grep cpu_intensive
 1245   0 ./cpu_intensive.sh
 1251   0 grep --color=auto cpu_intensive


$ nice -n 10 ./cpu_intensive.sh &
[2] 1254
Starting CPU intensive process...


$ sudo nice -n -5 ./cpu_intensive.sh &
[3] 1260
Starting CPU intensive process...


$ ps -o pid,ni,cmd | grep cpu_intensive
 1245   0 ./cpu_intensive.sh
 1254  10 ./cpu_intensive.sh
 1260  -5 ./cpu_intensive.sh
 1265   0 grep --color=auto cpu_intensive


$ ps aux | grep cpu_intensive
toor   1245  5.0  0.1  16240  3120 pts/0 R  10:26  0:01 ./cpu_intensive.sh
toor   1254  3.2  0.1  16240  3100 pts/0 S  10:26  0:00 ./cpu_intensive.sh
root   1260  6.5  0.1  16240  3150 pts/0 R  10:27  0:01 ./cpu_intensive.sh


$ renice 15 1245
1245 (process ID) old priority 0, new priority 15


$ ps -o pid,ni,cmd -p 1245
  PID  NI CMD
 1245  15 ./cpu_intensive.sh


$ sudo renice 5 -u $(whoami)
1245 (process ID) old priority 15, new priority 5
1254 (process ID) old priority 10, new priority 5


$ jobs -l
[1]-  1245 Running                 ./cpu_intensive.sh &
[2]+  1254 Running                 nice -n 10 ./cpu_intensive.sh &
[3]   1260 Running                 sudo nice -n -5 ./cpu_intensive.sh &


$ kill %1
[1]-  Terminated              ./cpu_intensive.sh


$ pkill -f cpu_intensive
(no output)


$ pkill -9 -f cpu_intensive
(no output)


$ echo "This would kill all processes for user: toor"
This would kill all processes for user: toor


------------------------------------------------------------
Task 3 – Monitoring & Automation
------------------------------------------------------------

$ ./system_monitor.sh
(no terminal output — logs written to file)


$ cat system_monitor.log
=== System Monitor Report - 2026-02-18 11:02:14 ===
CPU and Memory Usage:
top - 11:02:14 up 2:10,  1 user,  load average: 0.01, 0.02, 0.05
Tasks: 104 total,   1 running, 103 sleeping
%Cpu(s):  0.6 us,  0.3 sy,  0.0 ni, 99.1 id
MiB Mem :  1974.0 total,  1225.4 free,  315.2 used,  433.4 buff/cache

Top 5 CPU consuming processes:
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
toor      1420  0.6  0.1  16240  3200 pts/0    R+   11:02   0:00 ps aux --sort=-%cpu
root         1  0.0  0.4 168256  8956 ?        Ss   08:52   0:02 /sbin/init

Top 5 Memory consuming processes:
root       821  0.0  0.5 122400 10456 ?        Ssl  08:52   0:01 amazon-ssm-agent
root         1  0.0  0.4 168256  8956 ?        Ss   08:52   0:02 /sbin/init

Disk Usage:
Filesystem      Size  Used Avail Use% Mounted on
/dev/root        30G   11G   20G  34% /


$ yes > /dev/null &
[1] 1588


$ cat cpu_alerts.log
2026-02-18 11:15:00 - HIGH CPU USAGE ALERT: 92%
Top CPU consuming processes:
toor   1588  99.8  0.1  yes
---


$ ./dashboard.sh
=== Process Monitoring Dashboard ===
Current Time: Tue Feb 18 11:20:15 UTC 2026

=== System Load ===
 11:20:15 up 2:28,  1 user,  load average: 0.35, 0.28, 0.15

=== Top 5 CPU Processes ===
USER   PID %CPU %MEM VSZ   RSS TTY   STAT START TIME COMMAND
toor  1588  0.0  0.1  8920  1600 pts/0 S  11:14 0:00 yes
root     1  0.0  0.4 168256 8956 ? Ss 08:52 0:02 /sbin/init

=== Top 5 Memory Processes ===
root   821  0.0  0.5 122400 10456 ? Ssl 08:52 0:01 amazon-ssm-agent
root     1  0.0  0.4 168256  8956 ? Ss 08:52 0:02 /sbin/init

=== Recent Alerts ===
CPU Alerts:
2026-02-18 11:15:00 - HIGH CPU USAGE ALERT: 92%

Memory Alerts:
No memory alerts


------------------------------------------------------------
Verification Section
------------------------------------------------------------

Process successfully terminated
3
2
Lab 7 verification complete!
